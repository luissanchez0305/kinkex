<?xml version="1.0"?>
<config>
	<modules>
		<Fishpig_SmushIt>
			<version>1.2.8.1</version>
		</Fishpig_SmushIt>
	</modules>
	<global>
		<blocks>
			<smushit>
				<class>Fishpig_SmushIt_Block</class>
			</smushit>
		</blocks>
		<helpers>
			<smushit>
				<class>Fishpig_SmushIt_Helper</class>
			</smushit>
		</helpers>
		<models>
			<core>
				<rewrite>
					<design_package>Fishpig_SmushIt_Model_Core_Design_Package</design_package>
				</rewrite>
			</core>
			<catalog>
				<rewrite>
					<product_image>Fishpig_SmushIt_Model_Catalog_Product_Image</product_image>
				</rewrite>
			</catalog>
			<smushit>
				<class>Fishpig_SmushIt_Model</class>
				<resourceModel>smushit_resource</resourceModel>
			</smushit>
			<smushit_resource>
				<class>Fishpig_SmushIt_Model_Resource</class>
				<entities>
					<image><table>smushit_image</table></image>
					<image_type_catalog_product><table>catalog_product_entity_media_gallery</table></image_type_catalog_product>
					<image_type_catalog_category><table>catalog_category_entity_varchar</table></image_type_catalog_category>
					<image_type_skin><table>smushit_image_skin</table></image_type_skin>
				</entities>
			</smushit_resource>
		</models>
		<resources>
			<smushit_setup>
				<setup><module>Fishpig_SmushIt</module></setup>
			</smushit_setup>
		</resources>
	</global>
	<adminhtml>
		<layout>
			<updates>
				<smushit>
					<file>smushit.xml</file>
				</smushit>
			</updates>
		</layout>
	</adminhtml>
	<admin>
		<routers>
			<adminhtml>
				<args>
					<modules>
						<smushit before="Mage_Adminhtml">Fishpig_SmushIt_Adminhtml</smushit>
					</modules>
				</args>
			</adminhtml>
		</routers>
	</admin>
	<frontend>	
		<events>
			<catalog_helper_output_construct>
				<observers>
					<smushit>
						<class>smushit/observer</class>
						<method>addCategoryImageHandlerObserver</method>
					</smushit>
				</observers>
			</catalog_helper_output_construct>
			<!--
			<controller_action_layout_render_before>
				<observers>
					<smushit>
						<class>smushit/observer</class>
						<method>addSmushedSkinImagesObserver</method>
					</smushit>
				</observers>
			</controller_action_layout_render_before>
			-->
		</events>
	</frontend>
</config>