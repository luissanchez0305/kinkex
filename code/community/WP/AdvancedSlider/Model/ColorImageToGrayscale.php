<?php
/*
Copyright (C) 2011, WebAndPeople.com
*/
?>
<?php
 class WP_AdvancedSlider_Model_ColorImageToGrayscale{protected $   ;protected $    =array ();protected $     ;protected $      ;protected $       ;protected $        ;public function __construct($      =null,$        =null,$   =100){if (!is_null($      ))$this->{"\x73\x65\x74\x53\x6f\x75\x72\x63\x65\x55\x72\x69"}($      );if (!is_null($        ))$this->{"\x73\x65\x74\x54\x61\x72\x67\x65\x74\x55\x72\x69"}($        );$this->{"\x73\x65\x74\x51\x75\x61\x6c\x69\x74\x79"}($   );}public function setQuality($   ){$this->   =$   ;}public function setSourceUri($      ){if (!file_exists($      ))throw new Exception (chr(73).chr(109).chr(97).chr(103).chr(101).chr(32).chr(115).chr(111).chr(117).chr(114).chr(99).chr(101).chr(32).chr(34).$      .chr(34).chr(32).chr(105).chr(115).chr(32).chr(110).chr(111).chr(116).chr(32).chr(101).chr(120).chr(105).chr(115).chr(116).chr(105).chr(110).chr(103));$         =@getimagesize($      );if (!$         )throw new Exception (chr(73).chr(109).chr(97).chr(103).chr(101).chr(32).chr(115).chr(111).chr(117).chr(114).chr(99).chr(101).chr(32).chr(34).$      .chr(34).chr(32).chr(105).chr(115).chr(32).chr(110).chr(111).chr(116).chr(32).chr(111).chr(102).chr(32).chr(97).chr(32).chr(115).chr(117).chr(112).chr(112).chr(111).chr(114).chr(116).chr(101).chr(100).chr(32).chr(116).chr(121).chr(112).chr(101));$this->      =$      ;$this->    =$         ;$this->{"\x6c\x6f\x61\x64\x49\x6d\x61\x67\x65"}();}public function setTargetUri($        ){$this->        =$        ;}public function loadImage(){if (!$this->      )throw new Exception (chr(78).chr(111).chr(32).chr(115).chr(111).chr(117).chr(114).chr(99).chr(101).chr(32).chr(105).chr(109).chr(97).chr(103).chr(101).chr(32).chr(85).chr(82).chr(73).chr(32).chr(115).chr(101).chr(116));switch ($this->    [2]){case IMAGETYPE_GIF:$this->     =imagecreatefromgif($this->      );break ;case IMAGETYPE_JPEG:$this->     =imagecreatefromjpeg($this->      );break ;case IMAGETYPE_PNG:$this->     =imagecreatefrompng($this->      );break ;default :throw new Exception (chr(73).chr(109).chr(97).chr(103).chr(101).chr(32).chr(116).chr(121).chr(112).chr(101).chr(32).chr(34).$this->    [chr(109).chr(105).chr(109).chr(101)].chr(34).chr(32).chr(105).chr(115).chr(32).chr(110).chr(111).chr(32).chr(115).chr(117).chr(112).chr(112).chr(111).chr(114).chr(116).chr(101).chr(100));}}public function saveImage($          =null){if (!$this->     )throw new Exception (chr(78).chr(111).chr(32).chr(105).chr(109).chr(97).chr(103).chr(101).chr(32).chr(108).chr(111).chr(97).chr(100).chr(101).chr(100));if (!$this->       )throw new Exception (chr(78).chr(111).chr(32).chr(109).chr(111).chr(100).chr(105).chr(102).chr(105).chr(99).chr(97).chr(116).chr(105).chr(111).chr(110).chr(32).chr(97).chr(112).chr(112).chr(108).chr(105).chr(101).chr(100));if (!$this->        )throw new Exception (chr(78).chr(111).chr(32).chr(116).chr(97).chr(114).chr(103).chr(101).chr(116).chr(32).chr(105).chr(109).chr(97).chr(103).chr(101).chr(32).chr(85).chr(82).chr(73).chr(32).chr(115).chr(101).chr(116));$          =$          ?$          :$this->    [2];switch ($          ){case IMAGETYPE_GIF:return imagegif($this->       ,$this->        );case IMAGETYPE_JPEG:return imagejpeg($this->       ,$this->        ,$this->   );case IMAGETYPE_PNG:return imagepng($this->       ,$this->        );default :throw new Exception (chr(73).chr(109).chr(97).chr(103).chr(101).chr(32).chr(84).chr(121).chr(112).chr(101).chr(32).chr(34).$          .chr(34).chr(32).chr(105).chr(115).chr(32).chr(110).chr(111).chr(32).chr(115).chr(117).chr(112).chr(112).chr(111).chr(114).chr(116).chr(101).chr(100));}}public function grayscale(){if (!$this->      )throw new Exception (chr(78).chr(111).chr(32).chr(115).chr(111).chr(117).chr(114).chr(99).chr(101).chr(32).chr(105).chr(109).chr(97).chr(103).chr(101).chr(32).chr(115).chr(101).chr(116));imagefilter($this->     ,IMG_FILTER_GRAYSCALE);$this->       =$this->     ;if ($this->        )return $this->{"\x73\x61\x76\x65\x49\x6d\x61\x67\x65"}();return true;}}